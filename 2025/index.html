<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Symposium</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@400;500;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles */
        body {
            font-family: 'Cormorant', serif;
            background-color: #fdfbf7; /* Light, airy off-white */
            color: #666666; /* Soft grey text */
            overscroll-behavior-y: contain; /* Prevents scroll bounce */
            overflow-x: hidden; /* Prevents horizontal scroll/white sliver on mobile */
        }
        .font-romantic {
            font-family: 'Cormorant', serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .font-cursive {
            font-family: 'Caveat', cursive;
        }
        .hero-section {
            background-image: url('assets/images/hero/img.jpg');
            background-size: cover;
            background-position: center;
            filter: brightness(1.1); /* Brighten the background image */
            position: relative;
        }
        
        /* On screens wider than 1000px, shift the background image position down slightly */
        @media (min-width: 1001px) {
            .hero-section {
                background-position: center 20%;
            }
        }
        
        /* Animation for the scrolling sections */
        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .scrolling-container {
            position: relative;
            width: 100%;
            overflow: hidden; /* This is the viewport */
        }
        .scrolling-content {
            display: flex;
            width: fit-content; /* Let the content define the width */
            animation-play-state: running;
        }
        .scrolling-container:hover .scrolling-content {
            animation-play-state: paused;
        }
        .scrolling-content.fast {
            animation: scroll 55s linear infinite; /* Slowed down */
        }
        .scrolling-content.slow {
            animation: scroll 75s linear infinite; /* Slowed down */
        }
        
        /* Faster scrolling on mobile */
        @media (max-width: 768px) {
            .scrolling-content.fast {
                animation-duration: 40s;
            }
            .scrolling-content.slow {
                animation-duration: 60s;
            }
        }
        
        /* Custom clip-path for themed sections */
        .clip-wave {
            clip-path: polygon(0 0, 100% 5%, 100% 100%, 0 95%);
        }
        
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        /* New fade effect for scrolling sections */
        .fade-edges::before,
        .fade-edges::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            z-index: 2;
            width: 10%;
            pointer-events: none; /* Allows scrolling through the gradient */
        }
        .fade-edges::before {
            left: 0;
            background: linear-gradient(to right, white, transparent);
        }
        .fade-edges::after {
            right: 0;
            background: linear-gradient(to left, white, transparent);
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Hero Section -->
    <header class="hero-section flex flex-col items-center justify-center text-white text-center p-4 h-[80vh] md:h-[95vh]">
        <div class="absolute inset-0 bg-black opacity-30"></div>
        <h1 class="font-romantic text-5xl sm:text-6xl md:text-8xl lg:text-9xl z-10" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.7);">
            Love Symposium
        </h1>
        <p class="z-10 mt-2 text-lg sm:text-xl md:text-2xl font-bold tracking-wider text-gray-100">A conference for people trying to solve modern relationships</p>
        <p class="z-10 mt-4 text-base sm:text-lg md:text-xl lg:text-2xl tracking-wider text-gray-200">
            The Weekend of November 14-16, 2025 at 
            <a href="https://www.google.com/maps/search/?api=1&query=The+Commons,San+Francisco,CA" target="_blank" rel="noopener noreferrer" class="inline-block bg-white/20 hover:bg-white/40 text-white font-semibold px-4 py-1 rounded-full transition duration-300 mx-1">The Commons, San Francisco</a>
        </p>
    </header>

    <!-- Main Content Container -->
    <div class="bg-[#fdfbf7] relative">
        <!-- Decorative Divider -->
        <div class="absolute top-0 left-0 right-0 h-20 -translate-y-1/2 z-10 flex items-center justify-center pointer-events-none">
            <svg class="w-full h-full" viewBox="0 0 1200 100" preserveAspectRatio="none">
                <path d="M0 50 Q 150 100, 300 50 T 600 50 T 900 50 T 1200 50" stroke="#5c323e" stroke-width="2" fill="none" />
                <path d="M0 50 Q 150 0, 300 50 T 600 50 T 900 50 T 1200 50" stroke="#5c323e" stroke-width="2" fill="none" />
            </svg>
        </div>

        <!-- Buttons Section -->
        <div class="text-center pt-20 relative z-20">
            <a href="https://lu.ma/lovesymposium2025" class="inline-block mx-2 px-8 py-4 bg-white text-[#5c323e] font-bold rounded-full text-lg hover:bg-gray-200 transition duration-300 shadow-lg" target="_blank">Apply to Attend</a>
            <a href="#schedule" class="inline-block mx-2 px-8 py-4 bg-[#5c323e] text-white font-bold rounded-full text-lg hover:bg-opacity-80 transition duration-300 shadow-lg">Schedule</a>
        </div>

        <!-- Main Content Section -->
        <main class="container mx-auto px-4 pt-16 pb-12 relative z-10">
            <section class="text-center max-w-4xl mx-auto">
                <div class="mb-16">
                    <h2 class="text-4xl md:text-6xl font-romantic text-[#5c323e] mb-8">November 14-16, 2025<br>San Francisco, CA</h2>
                    <div class="text-xl md:text-2xl leading-relaxed text-gray-700 space-y-6">
                        <p>The Love Symposium is a curated event for earnest founders, experts, and intellectuals obsessed with solving our hardest relationship problems and proliferating healthy connection at scale.</p>
                        
                        <p>There will be a weekend of interactive talks, workshops, hackathons, and late-night conversations. But our goal is to spark collaborations, action, and impact that go far beyond.</p>
                        
                        <p>This year's topics center around the dating industry, predictive AI and psychometrics for matchmaking, and the science of healthy love.</p>
                        
                        <p>If you have a session or activity you might like to run at the Symposium, <a href="mailto:contact@lovesymposium.com" class="text-[#8dafb9] hover:text-[#5c323e] underline">please let us know</a>.</p>
                    </div>
                </div>
                
                <!-- Hosts Section -->
                <div class="mt-16 mb-16">
                    <h3 class="text-2xl font-romantic text-[#5c323e] mb-8">Your Hosts</h3>
                    <div class="flex flex-col md:flex-row gap-8 justify-center items-center">
                        <div class="text-center">
                            <img src="assets/images/hosts/ann.jpg" alt="Ann Pierce" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl mx-auto mb-4" onerror="this.onerror=null;this.src='https://placehold.co/200x200/cccccc/ffffff?text=Ann+Pierce'">
                            <h4 class="text-xl font-bold text-[#5c323e]">Ann Pierce</h4>
                            <a href="https://x.com/itsannpierce" target="_blank" class="text-[#8dafb9] hover:text-[#5c323e]">@itsannpierce</a>
                        </div>
                        <div class="text-center">
                            <img src="assets/images/hosts/matt.jpg" alt="Matthew Fisher" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl mx-auto mb-4" onerror="this.onerror=null;this.src='https://placehold.co/200x200/cccccc/ffffff?text=Matthew+Fisher'">
                            <h4 class="text-xl font-bold text-[#5c323e]">Matthew Fisher</h4>
                            <a href="https://x.com/MathYouF" target="_blank" class="text-[#8dafb9] hover:text-[#5c323e]">@MathYouF</a>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Photo Gallery Section -->
        <section class="py-16 md:py-24 bg-white w-full">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl md:text-5xl font-romantic text-center mb-12 text-[#5c323e]">From Love Symposium 2024</h2>
            </div>
            
            <!-- Photo Gallery -->
            <div class="overflow-x-auto pb-4">
                 <div id="photo-gallery" class="flex space-x-4 p-4 min-w-max">
                     <!-- Photos will be inserted here -->
                 </div>
            </div>
        </section>

        <!-- Content We Love Section -->
        <section class="py-16 md:py-24 bg-gray-50 w-full">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl md:text-5xl font-romantic text-center mb-12 text-[#5c323e]">Content We Love</h2>
                <p class="text-xl text-center text-gray-600 mb-12 max-w-3xl mx-auto">Curated papers, books, articles, and media that inspire our understanding of love and relationships.</p>
            </div>
            
            <!-- Papers Row -->
            <div class="mb-12">
                <h3 class="text-2xl font-romantic text-center mb-6 text-[#5c323e]">Research Papers</h3>
                <div class="overflow-x-auto pb-4">
                    <div id="content-papers-gallery" class="flex space-x-6 p-4 min-w-max">
                        <!-- Papers will be inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- Books Row -->
            <div class="mb-12">
                <h3 class="text-2xl font-romantic text-center mb-6 text-[#5c323e]">Books</h3>
                <div class="overflow-x-auto pb-4">
                    <div id="content-books-gallery" class="flex space-x-6 p-4 min-w-max">
                        <!-- Books will be inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- Substacks Row -->
            <div class="mb-12">
                <h3 class="text-2xl font-romantic text-center mb-6 text-[#5c323e]">Substack Articles</h3>
                <div class="overflow-x-auto pb-4">
                    <div id="content-substacks-gallery" class="flex space-x-6 p-4 min-w-max">
                        <!-- Substacks will be inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- Tweets Row -->
            <div class="mb-12">
                <h3 class="text-2xl font-romantic text-center mb-6 text-[#5c323e]">Tweets</h3>
                <div class="overflow-x-auto pb-4">
                    <div id="content-tweets-gallery" class="flex space-x-6 p-4 min-w-max">
                        <!-- Tweets will be inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- YouTube Videos Row -->
            <div class="mb-12">
                <h3 class="text-2xl font-romantic text-center mb-6 text-[#5c323e]">YouTube Videos</h3>
                <div class="overflow-x-auto pb-4">
                    <div id="content-youtube-gallery" class="flex space-x-6 p-4 min-w-max">
                        <!-- YouTube videos will be inserted here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Tickets Section - Removed, price moved to FAQ -->

        <!-- FAQ Section -->
        <section class="container mx-auto px-4 py-16 md:py-24 max-w-4xl">
            <h2 class="text-4xl md:text-5xl font-romantic text-center mb-12 text-[#5c323e]">Frequently Asked Questions</h2>
            <div id="faq-container" class="space-y-8">
                <!-- FAQ items inserted here -->
            </div>
        </section>
        
        <!-- Schedule Section -->
        <section id="schedule" class="bg-white py-16 md:py-24">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl md:text-5xl font-romantic text-center mb-12 text-[#5c323e]">Symposium Schedule</h2>
                <div id="schedule-container" class="space-y-16">
                    <!-- Schedule days inserted here -->
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="container mx-auto px-4 py-16 md:py-24 text-center">
             <h2 class="text-3xl font-romantic text-center mb-4 text-[#5c323e]">Contact Us</h2>
             <p class="text-lg text-gray-600">Have a question? We'd love to hear from you.</p>
             <a href="mailto:contact@lovesymposium.com" class="inline-block mt-4 text-xl text-[#8dafb9] hover:text-[#5c323e] transition">
                contact@lovesymposium.com
             </a>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-[#5c323e] text-white text-center p-8">
        <p>© 2025 Love Symposium. All Rights Reserved.</p>
    </footer>

    <script>
        // =====================================================================
        // DATA URLs
        // =====================================================================
        const dataUrls = {
            speakers: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQuSLC5kKYfcrLYQIi7IqgpXY5I-t2lu7ztNicu3bcpHFtgWrJPvIo9L0fR05GH3WMJO540vTi5wWXl/pub?gid=0&single=true&output=csv',
            schedule: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQuSLC5kKYfcrLYQIi7IqgpXY5I-t2lu7ztNicu3bcpHFtgWrJPvIo9L0fR05GH3WMJO540vTi5wWXl/pub?gid=1770951979&single=true&output=csv',
        };
        const fallbackUrls = {
            speakers: 'assets/data/speakers.csv',
            schedule: 'assets/data/schedule.csv',
        };

        // =====================================================================
        // GLOBAL DATA VARIABLES
        // =====================================================================
        let allSpeakers = [];
        let allScheduleData = [];
        let allContentData = [];

        // =====================================================================
        // LOCAL DATA SOURCES (FALLBACKS & OTHERS)
        // =====================================================================
        
        const localSpeakers = [
            { "Index": "0", "Name": "Whitney Wolfe Herd", "Title": "Tinder and Bumble Founder", "Image URL": "https://i.insider.com/602d50a25843000018456a23?width=1136&format=jpeg", "Social Media Link": "#", "Confirmed?": "1", "Track": "Business & Tech" },
            { "Index": "1", "Name": "Justin McLeod", "Title": "Founder & CEO, Hinge", "Image URL": "https://cdn.sanity.io/images/z342s4t3/production/d34a6e3e117f0845347204b759639f77f0c13745-1200x800.jpg?w=1200&h=800&auto=format", "Social Media Link": "#", "Confirmed?": "1", "Track": "Business & Tech" },
            { "Index": "3", "Name": "Dr. John M. Gottman", "Title": "The Gottman Institute", "Image URL": "https://www.gottman.com/wp-content/uploads/2021/10/Drs-John-and-Julie-Gottman-1-1.jpg", "Social Media Link": "#", "Confirmed?": "1", "Track": "Psychology & Statistics" },
            { "Index": "7", "Name": "Alain de Botton", "Title": "Founder, The School of Life", "Image URL": "https://www.theschooloflife.com/wp-content/uploads/2019/7/Alain-de-Botton-2.jpg", "Social Media Link": "#", "Confirmed?": "1", "Track": "Philosophy & Art" },
        ];

        const localSchedule = [];

        const hosts = [
            { name: 'Ann Pierce', image: 'assets/images/hosts/ann.jpg', statement: 'Our mission is to create a space where modern love can be explored in all its facets. We believe that by bringing together diverse voices and fostering open dialogue, we can all learn to love more deeply and authentically.', x_account: 'https://x.com/annpierce' },
            { name: 'Matthew Fisher', image: 'assets/images/hosts/matt.jpg', statement: 'Love is the cornerstone of the human experience, yet we rarely give it the academic and intentional focus it deserves. This symposium is our answer—a chance to learn, share, and grow together in our understanding of connection.', x_account: 'https://x.com/matthewfisher' }
        ];

        const reviews = [
            { name: 'Humberto Moreira', image: 'https://placehold.co/100x100/ffb6c1/FFFFFF?text=H', text: 'An absolutely transformative experience. I left with a new perspective on my relationships.' },
            { name: 'Alex Chen', image: 'https://placehold.co/100x100/87ceeb/FFFFFF?text=A', text: 'The quality of speakers was phenomenal. So much wisdom in one place.' },
            { name: 'Alok Singh', image: 'https://placehold.co/100x100/98fb98/FFFFFF?text=A', text: 'I attended with my partner, and it was the best decision we\'ve made for our relationship all year.' },
            { name: 'Thomas Vu', image: 'https://placehold.co/100x100/dda0dd/FFFFFF?text=T', text: 'Finally, a conference that treats love with the intellectual respect it deserves.' },
            { name: 'Kincaid O\'Neil', image: 'https://placehold.co/100x100/f0e68c/FFFFFF?text=K', text: 'I felt so seen and understood. The sense of community was palpable.' },
            { name: 'Suzie Antal', image: 'https://placehold.co/100x100/add8e6/FFFFFF?text=S', text: 'Incredibly well-organized and profoundly insightful. I will be back next year!' },
            { name: 'Ari Zerner', image: 'https://placehold.co/100x100/b0c4de/FFFFFF?text=A', text: 'A must-attend for anyone interested in the future of human connection.' },
            { name: 'Ben Carter', image: 'https://placehold.co/100x100/A9A9A9/FFFFFF?text=B.C.', text: 'The best investment I\'ve made in my personal growth this year.' },
            { name: 'Olivia Kim', image: 'https://placehold.co/100x100/696969/FFFFFF?text=O.K.', text: 'The topics were so relevant and the discussions were incredibly engaging.' },
            { name: 'Gabriel Santos', image: 'https://placehold.co/100x100/808080/FFFFFF?text=G.S.', text: 'A truly inspiring weekend. I can\'t wait for the next one.' },
        ];

        const tickets = [
            { name: 'Early Bird', price: 100, features: ['Full Access to All Talks', 'Digital Welcome Packet', 'Community Forum Access', 'Sale ends September 1st'], cta: 'Buy Now', highlight: false },
            { name: 'Late In Love', price: 150, features: ['Full Access to All Talks', 'Digital Welcome Packet', 'Community Forum Access', 'Recording of All Sessions'], cta: 'Buy Now', highlight: false },
            { name: 'Sponsor', price: 2000, features: ['All-Access VIP Pass', 'Special Mention in Program', 'Private Q&A with Hosts', 'Logo Placement on Site'], cta: 'Become a Sponsor', highlight: true }
        ];

        const faqData = [
            { question: "When and where?", answer: "The Love Symposium will run all day Friday 11/14, Saturday 11/15, and Sunday 11/16 at <strong>The Commons</strong>, a beautiful and cozy community space located at 550 Laguna St, San Francisco, CA 94102." },
            { question: "What does it cost?", answer: "Due to limited space, when you apply to attend on Luma, we'll first ask a few questions to gauge fit. Once accepted, tickets are <strong>$200 each</strong>." },
            { question: "Will food be provided?", answer: "We are pleased to offer the following: <ul><li class='ml-4 list-disc'>Friday: Lunch</li><li class='ml-4 list-disc'>Saturday: Breakfast and Lunch</li><li class='ml-4 list-disc'>Sunday: Breakfast</li></ul>" },
            { question: "Is there a dress code?", answer: "The venue is shoes-off, and you might find yourself sitting on the floor at times, so we recommend dressing for comfort." },
            { question: "Can I get a refund on my ticket?", answer: "Unfortunately tickets are non-refundable for the time being." },
            { question: "If I'm coming from out of town, where should I stay?", answer: "There are many hotels, hostels, and Airbnbs within walking distance of The Commons. A few of the closest are <strong>The Annex at Hayes Valley</strong>, <strong>Hayes Valley Inn</strong>, and <strong>Inn at Grove</strong> (all a 5 minute walk to the venue)." }
        ];

        // =====================================================================
        // DATA FETCHING & PARSING
        // =====================================================================

        async function fetchAndParseCsv(primaryUrl, fallbackUrl, parser) {
            try {
                const response = await fetch(primaryUrl);
                if (!response.ok) throw new Error('Primary URL fetch failed');
                const csvText = await response.text();
                console.log(`Successfully fetched data from PRIMARY source: ${primaryUrl}`);
                console.log("Raw CSV:\n", csvText);
                return parser(csvText);
            } catch (e) {
                console.warn(`Primary fetch failed: ${e.message}. Trying fallback URL: ${fallbackUrl}`);
                try {
                    const response = await fetch(fallbackUrl);
                    if (!response.ok) throw new Error('Fallback URL fetch failed');
                    const csvText = await response.text();
                    console.log(`Successfully fetched data from FALLBACK source: ${fallbackUrl}`);
                    console.log("Raw CSV:\n", csvText);
                    return parser(csvText);
                } catch (e2) {
                    console.error(`Fallback fetch also failed: ${e2.message}.`);
                    return [];
                }
            }
        }
        
        function parseCsv(csvText, headerRowIndex, dataRowStart) {
            const lines = csvText.trim().replace(/\r/g, '').split('\n');
            if (lines.length < dataRowStart) {
                console.error("CSV has fewer rows than the specified data start row.");
                return [];
            }
            
            const headers = lines[headerRowIndex].split(',').map(h => h.trim().replace(/"/g, ''));
            
            return lines.slice(dataRowStart).map((line) => {
                const values = line.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                const rowObject = {};
                for (let i = 0; i < headers.length; i++) {
                    const header = headers[i];
                    if (header) { 
                        let value = (values[i] || '').trim();
                        if (value.startsWith('"') && value.endsWith('"')) {
                            value = value.slice(1, -1).replace(/""/g, '"');
                        }
                        rowObject[header] = value;
                    }
                }
                return rowObject;
            });
        }

        function parseSpeakersCsv(csvText) {
            const data = parseCsv(csvText, 0, 1);
            console.log("Parsed Speakers Data:", data);
            return data;
        }

        function parseScheduleCsv(csvText) {
            const data = parseCsv(csvText, 0, 1);
            console.log("Parsed Schedule Data:", data);
            return data;
        }

        function parseContentCsv(csvText) {
            const data = parseCsv(csvText, 0, 1);
            console.log("Parsed Content Data:", data);
            return data;
        }

        // =====================================================================
        // CONFIGURATION & TOGGLES
        // =====================================================================

        const CONFIG = {
            showSpeakers: true,
            showTickets: true,
            showSchedule: false, // Toggle to show/hide schedule section
            showHosts: true
        };

        // =====================================================================
        // DOM POPULATION & RENDERING
        // =====================================================================

        function renderPage() {
            if (CONFIG.showSpeakers) populateSpeakers(allSpeakers);
            if (CONFIG.showHosts) populateHosts(hosts);
            // populateReviews(reviews); // Reviews section removed
            populateTickets(tickets);
            populateFaq(faqData);
            populatePhotoGallery();
            populatePapersGallery();
            populateBooksGallery();
            populateContentSections(allContentData);
            if (CONFIG.showSchedule) populateSchedule(allScheduleData, allSpeakers);
            
            // Toggle schedule section visibility
            const scheduleSection = document.getElementById('schedule');
            const scheduleButton = document.querySelector('a[href="#schedule"]');
            if (scheduleSection) {
                scheduleSection.style.display = CONFIG.showSchedule ? 'block' : 'none';
            }
            if (scheduleButton) {
                scheduleButton.style.display = CONFIG.showSchedule ? 'inline-block' : 'none';
            }
        }

        function populateSpeakers(speakers) {
            const industryGrid = document.getElementById('industry-grid');
            const psychometricsGrid = document.getElementById('psychometrics-grid');
            const philosophyGrid = document.getElementById('philosophy-grid');

            if (!industryGrid || !psychometricsGrid || !philosophyGrid) return;

            industryGrid.innerHTML = '';
            psychometricsGrid.innerHTML = '';
            philosophyGrid.innerHTML = '';

            const confirmedSpeakers = speakers.filter(s => s['Confirmed?'] === '1');

            confirmedSpeakers.forEach(speaker => {
                const card = `<div class="flex flex-col items-center text-center"><img src="${speaker['Image URL']}" alt="Profile of ${speaker.Name}" class="w-24 h-24 md:w-28 md:h-28 rounded-full object-cover border-4 border-white shadow-lg" onerror="this.onerror=null;this.src='https://placehold.co/200x200/cccccc/ffffff?text=Image+Not+Found'"><a href="${speaker['Social Media Link'] || '#'}" class="mt-4 font-bold text-[#5c323e] hover:text-[#8dafb9] transition">${speaker.Name}</a><p class="text-sm text-gray-500">${speaker.Title}</p></div>`;
                
                if (speaker.Track === 'Business & Tech') {
                    industryGrid.innerHTML += card;
                } else if (speaker.Track === 'Psychology & Statistics') {
                    psychometricsGrid.innerHTML += card;
                } else if (speaker.Track === 'Philosophy & Art') {
                    philosophyGrid.innerHTML += card;
                }
            });
        }
        
        function populateHosts(hostsData) {
            const section = document.getElementById('hosts-section');
            if (!section) return;
            section.innerHTML = '';
            hostsData.forEach((host, index) => {
                const alignmentClass = index === 0 
                    ? 'md:items-end md:text-right' 
                    : 'md:items-start md:text-left';
                const xAccountLink = host.x_account ? `<a href="${host.x_account}" target="_blank" rel="noopener noreferrer" class="text-sm text-[#8dafb9] hover:text-[#5c323e] transition mt-1">@${host.x_account.split('/').pop()}</a>` : '';

                const content = `
                    <div class="flex flex-col items-center text-center w-full md:w-1/2 ${alignmentClass}">
                        <img src="${host.image}" alt="Photo of ${host.name}" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl mb-6" onerror="this.onerror=null;this.src='https://placehold.co/300x300/cccccc/ffffff?text=Image+Not+Found'">
                        <h3 class="text-2xl font-bold mb-2 text-[#5c323e]">${host.name}</h3>
                        ${xAccountLink}
                        <p class="text-gray-600 leading-relaxed max-w-md mt-4">${host.statement}</p>
                    </div>
                `;
                section.innerHTML += content;
            });
        }

        function populateReviews(reviewsData) {
            const topContainer = document.getElementById('reviews-container-top');
            if (!topContainer) return; 
            
            const allReviews = [...reviewsData, ...reviewsData, ...reviewsData, ...reviewsData]; 
            topContainer.innerHTML = '';

            allReviews.forEach(review => { 
                const card = `<div class="flex-shrink-0 w-80 mx-4 p-6 bg-gray-50 rounded-lg shadow-md flex items-start"><img src="${review.image}" alt="Photo of ${review.name}" class="w-12 h-12 rounded-full object-cover mr-4 border-2 border-white" onerror="this.onerror=null;this.src='https://placehold.co/100x100/cccccc/ffffff?text=Error'"><div><p class="font-semibold text-[#5c323e]">${review.name}</p><p class="text-gray-600 italic">"${review.text}"</p></div></div>`; 
                topContainer.innerHTML += card;
            });
        }

        function populatePhotoGallery() {
            const photoGallery = document.getElementById('photo-gallery');
            if (!photoGallery) return;
            
            // Use new numbered photo filenames in specified order
            const photoOrder = [15, 14, 17, 5, 6, 3, 18, 10, 4, 9, 2];
            
            photoOrder.forEach(photoNum => {
                const img = document.createElement('img');
                img.src = `assets/images/2024/${photoNum}.jpg`;
                img.alt = `Love Symposium 2024 Photo`;
                img.className = 'h-64 w-auto object-cover rounded-lg shadow-lg flex-shrink-0';
                img.onerror = function() {
                    this.style.display = 'none';
                };
                photoGallery.appendChild(img);
            });
        }

        function populatePapersGallery() {
            const papersGallery = document.getElementById('papers-gallery');
            if (!papersGallery) return;
            
            // Available paper images (reversed order)
            const paperFiles = ['58.jpg', '57.jpg', '56.jpg', '55.jpg', '20.jpg', '14.jpg', '8.jpg', '2.jpg', '1.jpg'];
            
            paperFiles.forEach(paperFile => {
                const paperCard = document.createElement('div');
                paperCard.className = 'flex-shrink-0 w-36 sm:w-40 md:w-64 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300';
                
                const img = document.createElement('img');
                img.src = `assets/images/papers/${paperFile}`;
                img.alt = `Research Paper`;
                img.className = 'w-full h-48 sm:h-56 md:h-80 object-cover';
                img.onerror = function() {
                    this.parentElement.style.display = 'none';
                };
                
                paperCard.appendChild(img);
                papersGallery.appendChild(paperCard);
            });
        }

        function populateBooksGallery() {
            const booksGallery = document.getElementById('books-gallery');
            if (!booksGallery) return;
            
            // Available book images
            const bookFiles = ['dataclysm.jpg', 'lovefortherightreasos.jpg', 'marriagehistory.jpg'];
            
            bookFiles.forEach(bookFile => {
                const bookCard = document.createElement('div');
                bookCard.className = 'flex-shrink-0 w-36 sm:w-40 md:w-48 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300';
                
                const img = document.createElement('img');
                img.src = `assets/images/books/${bookFile}`;
                img.alt = `Recommended Book`;
                img.className = 'w-full h-48 sm:h-56 md:h-72 object-cover';
                img.onerror = function() {
                    this.parentElement.style.display = 'none';
                };
                
                bookCard.appendChild(img);
                booksGallery.appendChild(bookCard);
            });
        }

        function populateContentSections(contentData) {
            if (!contentData || contentData.length === 0) return;
            
            // Group content by type
            const contentByType = contentData.reduce((acc, item) => {
                const type = item.type;
                if (!acc[type]) acc[type] = [];
                acc[type].push(item);
                return acc;
            }, {});
            
            // Populate each content type
            if (contentByType.paper) populateContentPapers(contentByType.paper);
            if (contentByType.book) populateContentBooks(contentByType.book);
            if (contentByType.substack) populateContentSubstacks(contentByType.substack);
            if (contentByType.twitter) populateContentTweets(contentByType.twitter);
            if (contentByType.youtube) populateContentYoutube(contentByType.youtube);
        }

        function populateContentPapers(papers) {
            const gallery = document.getElementById('content-papers-gallery');
            if (!gallery) return;
            
            papers.forEach(paper => {
                const paperCard = document.createElement('div');
                paperCard.className = 'flex-shrink-0 w-36 sm:w-40 md:w-64 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300';
                
                const img = document.createElement('img');
                img.src = paper.url;
                img.alt = paper.title || 'Research Paper';
                img.className = 'w-full h-48 sm:h-56 md:h-80 object-cover';
                img.onerror = function() {
                    this.parentElement.style.display = 'none';
                };
                
                paperCard.appendChild(img);
                gallery.appendChild(paperCard);
            });
        }

        function populateContentBooks(books) {
            const gallery = document.getElementById('content-books-gallery');
            if (!gallery) return;
            
            books.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'flex-shrink-0 w-36 sm:w-40 md:w-48 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300';
                
                const img = document.createElement('img');
                img.src = book.url;
                img.alt = book.title || 'Recommended Book';
                img.className = 'w-full h-48 sm:h-56 md:h-72 object-cover';
                img.onerror = function() {
                    this.parentElement.style.display = 'none';
                };
                
                bookCard.appendChild(img);
                gallery.appendChild(bookCard);
            });
        }

        function populateContentSubstacks(substacks) {
            const gallery = document.getElementById('content-substacks-gallery');
            if (!gallery) return;
            
            // Define post metadata based on URLs
            const postMetadata = {
                'https://sashachapin.substack.com/p/what-im-looking-for-in-my-marriage': {
                    title: 'What I\'m looking for in my marriage by Sasha Chapin',
                    description: 'the ideal of this guy'
                },
                'https://aella.substack.com/p/how-relationships-change-over-time': {
                    title: 'How Relationships Change Over Time by Aella',
                    description: 'Survey results'
                }
            };
            
            substacks.forEach((substack, index) => {
                const substackCard = document.createElement('div');
                substackCard.className = 'flex-shrink-0 w-80 md:w-96 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 p-4';
                
                const embedDiv = document.createElement('div');
                embedDiv.className = 'substack-post-embed';
                embedDiv.id = `substack-embed-${index}`;
                
                const metadata = postMetadata[substack.url] || { title: 'Substack Article', description: '' };
                
                const titleP = document.createElement('p');
                titleP.lang = 'en';
                titleP.textContent = metadata.title;
                
                const link = document.createElement('a');
                link.setAttribute('data-post-link', '');
                link.href = substack.url;
                link.textContent = 'Read on Substack';
                link.target = '_blank';
                
                embedDiv.appendChild(titleP);
                
                if (metadata.description) {
                    const descP = document.createElement('p');
                    descP.textContent = metadata.description;
                    embedDiv.appendChild(descP);
                }
                
                embedDiv.appendChild(link);
                
                substackCard.appendChild(embedDiv);
                gallery.appendChild(substackCard);
                
                // Add individual script tag for each embed
                const script = document.createElement('script');
                script.async = true;
                script.src = 'https://substack.com/embedjs/embed.js';
                script.charset = 'utf-8';
                substackCard.appendChild(script);
            });
        }

        function populateContentTweets(tweets) {
            const gallery = document.getElementById('content-tweets-gallery');
            if (!gallery) return;
            
            tweets.forEach(tweet => {
                const tweetCard = document.createElement('div');
                tweetCard.className = 'flex-shrink-0 w-80 md:w-96 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300';
                
                // Extract tweet ID from URL
                const tweetId = tweet.url.match(/status\/(\d+)/)?.[1];
                if (!tweetId) return;
                
                const blockquote = document.createElement('blockquote');
                blockquote.className = 'twitter-tweet';
                blockquote.setAttribute('data-theme', 'light');
                blockquote.setAttribute('data-width', '400');
                
                const link = document.createElement('a');
                link.href = tweet.url;
                link.target = '_blank';
                link.textContent = 'View Tweet';
                
                blockquote.appendChild(link);
                tweetCard.appendChild(blockquote);
                gallery.appendChild(tweetCard);
            });
            
            // Load Twitter widgets script if not already loaded
            if (!window.twttr && !document.querySelector('script[src*="widgets.js"]')) {
                const script = document.createElement('script');
                script.async = true;
                script.src = 'https://platform.twitter.com/widgets.js';
                script.charset = 'utf-8';
                document.head.appendChild(script);
            } else if (window.twttr && window.twttr.widgets) {
                window.twttr.widgets.load();
            }
        }

        function populateContentYoutube(videos) {
            const gallery = document.getElementById('content-youtube-gallery');
            if (!gallery) return;
            
            videos.forEach(video => {
                const videoCard = document.createElement('div');
                videoCard.className = 'flex-shrink-0 w-80 md:w-96 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300';
                
                const iframe = document.createElement('iframe');
                iframe.src = video.url;
                iframe.width = '100%';
                iframe.height = '240';
                iframe.style.border = 'none';
                iframe.style.borderRadius = '8px';
                iframe.setAttribute('allowfullscreen', '');
                iframe.loading = 'lazy';
                
                videoCard.appendChild(iframe);
                gallery.appendChild(videoCard);
            });
        }

        function populateTickets(ticketsData) {
            const grid = document.getElementById('tickets-grid'); if (!grid) return; grid.innerHTML = '';
            ticketsData.forEach(ticket => { 
                const highlight = String(ticket.highlight).toLowerCase() === 'true';
                const highlightClass = highlight ? 'border-[#d9bb89] border-2' : 'border-gray-200'; 
                const buttonClass = highlight ? 'bg-[#d9bb89] text-[#5c323e]' : 'bg-[#5c323e] text-white'; 
                const featuresArray = Array.isArray(ticket.features) ? ticket.features : (ticket.features || '').split(';');
                const card = `<div class="rounded-lg shadow-lg p-8 flex flex-col bg-white border ${highlightClass}"><h3 class="text-2xl font-bold text-center text-[#5c323e]">${ticket.name}</h3><p class="text-5xl font-bold text-center my-4 text-gray-800">$${ticket.price}</p><ul class="my-4 space-y-2 flex-grow text-gray-600">${featuresArray.map(feature => `<li class="flex items-center"><svg class="w-5 h-5 text-[#8dafb9] mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>${feature}</li>`).join('')}</ul><a href="#" class="w-full text-center font-bold py-3 px-6 rounded-lg ${buttonClass} hover:bg-opacity-80 transition duration-300 mt-6">${ticket.cta}</a></div>`; 
                grid.innerHTML += card; 
            });
        }
        
        function populateFaq(faqData) {
            const container = document.getElementById('faq-container');
            if (!container) return;
            container.innerHTML = '';
            faqData.forEach(item => {
                const faqItem = `
                    <div>
                        <h3 class="text-xl font-bold mb-2 text-[#5c323e]">${item.question}</h3>
                        <div class="text-gray-600 leading-relaxed">${item.answer}</div>
                    </div>
                `;
                container.innerHTML += faqItem;
            });
        }

        function populateSchedule(schedule, speakers) {
            const container = document.getElementById('schedule-container');
            if (!container) return;
            container.innerHTML = '';

            const trackColors = {
                'Business & Tech': 'bg-rose-50',
                'Psychology & Statistics': 'bg-blue-50',
                'Philosophy & Art': 'bg-yellow-50',
                'Host': 'bg-gray-100',
            };

            const scheduleByDay = schedule.reduce((acc, row) => {
                if (!row.Date) return acc; 
                const date = row.Date;
                if (!acc[date]) acc[date] = { date, slots: [] };
                
                const getSpeaker = (id) => {
                    if (!id) return null;
                    if (id === 'host_0' || id === '97') return {...hosts[0], Track: 'Host'};
                    if (id === 'host_1' || id === '98') return {...hosts[1], Track: 'Host'};
                    return speakers.find(s => s.Index === id);
                };

                acc[date].slots.push({
                    time: row.Time,
                    rooms: [
                        { name: row['Room 1 Name'], talk: row['Room 1 Talk Name'], speaker: getSpeaker(row['Room 1 Speaker Index']) },
                        { name: row['Room 2 Name'], talk: row['Room 2 Talk Name'], speaker: getSpeaker(row['Room 2 Speaker Index']) }
                    ]
                });
                return acc;
            }, {});

            Object.values(scheduleByDay).forEach(day => {
                if (!day.slots.length) return;
                const room1Name = day.slots[0].rooms[0].name || 'Room 1';
                const room2Name = day.slots[0].rooms[1].name || 'Room 2';

                let dayHtml = `<div class="day-schedule">
                        <div class="sticky top-0 bg-white z-20">
                            <h3 class="text-3xl font-bold pt-4 pb-2 text-center text-[#5c323e]">${day.date}</h3>
                            <div class="grid grid-cols-[60px_1fr_1fr] gap-x-4 border-b-2 font-bold text-center text-gray-500">
                                <div class="py-3">Time</div>
                                <div class="py-3">${room1Name}</div>
                                <div class="py-3">${room2Name}</div>
                            </div>
                        </div>
                        <div class="schedule-body">`;

                day.slots.forEach(slot => {
                    dayHtml += `<div class="grid grid-cols-[60px_1fr_1fr] gap-x-4 border-b min-h-[100px]">
                        <div class="py-4 text-center font-bold text-gray-400 text-sm">${slot.time}</div>`;
                    
                    slot.rooms.forEach(talk => {
                        const bgColor = talk.speaker ? (trackColors[talk.speaker.Track] || 'bg-gray-50') : '';
                        dayHtml += `<div class="py-2 flex items-stretch">
                            <div class="p-2 rounded-lg w-full flex flex-col justify-center ${bgColor}">
                                ${talk && talk.talk ? `
                                    <p class="font-semibold text-[#5c323e] text-sm">${talk.talk}</p>
                                    ${talk.speaker ? `<p class="text-xs text-gray-500 mt-1">${talk.speaker.Name || talk.speaker.name}<br><span class="italic">${talk.speaker.Title || talk.speaker.title}</span></p>` : ''}
                                ` : '' }
                            </div>
                        </div>`;
                    });

                    dayHtml += `</div>`;
                });

                dayHtml += `</div></div>`;
                container.innerHTML += dayHtml;
            });
        }

        async function initializePage() {
            const [speakersData, scheduleData, contentData] = await Promise.all([
                fetchAndParseCsv(dataUrls.speakers, fallbackUrls.speakers, parseSpeakersCsv),
                fetchAndParseCsv(dataUrls.schedule, fallbackUrls.schedule, parseScheduleCsv),
                fetchAndParseCsv('assets/data/content.csv', 'assets/data/content.csv', parseContentCsv)
            ]);
            
            allSpeakers = speakersData.length ? speakersData : localSpeakers;
            allScheduleData = scheduleData.length ? scheduleData : localSchedule;
            allContentData = contentData.length ? contentData : [];

            renderPage();
        }

        document.addEventListener('DOMContentLoaded', () => {
            initializePage();
        });
    </script>

</body>
</html>
